[package]
authors = ["Ben Ruijl <benruyl@gmail.com>"]
categories = ["science"]
description = "A blazing fast computer algebra system, with community extensions"
edition = "2021"
keywords = ["algebra", "symbolic", "manipulation", "mathematics", "physics"]
license = "MIT"
name = "symbolica_community"
readme = "Readme.md"
repository = "https://github.com/benruijl/symbolica-community"
rust-version = "1.88"
version = "1.3.0"
exclude = ["dist"]

[[bin]]
name = "stub_gen"
required-features = ["python_stubgen"]

[lib]
name = "symbolica_community"
crate-type = ["rlib", "cdylib"]

[features]
default = ["module"]
module = ["pyo3/abi3", "symbolica/python_abi3"] # incompatible with stub_gen
python_stubgen = [
    "pyo3-stub-gen",
    "symbolica/python_stubgen",
    "spynso3/python_stubgen",
    "idenso/python_stubgen",
    "vakint/python_stubgen",
    "example_extension/python_stubgen",
]

[dependencies]
example_extension = { path = "example_extension" }
idenso = { version = "0.3", features = ["bincode", "python"] }
symbolica = { version = "1.2", features = ["python_export"] }
pyo3 = { version = "0.27", features = ["abi3"] }
pyo3-stub-gen = { version = "0.17", optional = true, default-features = false, features = [
    "numpy",
] }
spynso3 = { version = "0.1" }
vakint = { git = "https://github.com/alphal00p/vakint", rev = "f7dc9907abb1786306bfc44fde6c32ba30446422", features = [
    "symbolica_community_module",
] }

[patch.crates-io]
spynso3 = { git = "https://github.com/alphal00p/spenso", rev = "ad0e8c24398ac14cce6b2b6b29dbc938e1833d8c" }
idenso = { git = "https://github.com/alphal00p/spenso", rev = "ad0e8c24398ac14cce6b2b6b29dbc938e1833d8c" }
spenso = { git = "https://github.com/alphal00p/spenso", rev = "ad0e8c24398ac14cce6b2b6b29dbc938e1833d8c" }
spenso-hep-lib = { git = "https://github.com/alphal00p/spenso", rev = "ad0e8c24398ac14cce6b2b6b29dbc938e1833d8c" }
#pyo3-stub-gen = { git = "https://github.com/Jij-Inc/pyo3-stub-gen", rev = "f44a54e238c8b1fcd89b5145da465eb749a3f5fe", optional = true, default-features = false, features = [
#    "numpy",
#] }

#symbolica = { git = "https://github.com/symbolica-dev/symbolica", rev = "7a43c94878f9746e12a430ee6a54bcffb6a5be9a" }
symbolica = { git = "https://github.com/symbolica-dev/symbolica", rev = "f4e275a8f7a070b0aaa2228cb8b67058130579c4" }

[build-dependencies]
pyo3-build-config = "*"
